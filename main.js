(()=>{"use strict";var t,e,s,i,h,a={518:(t,e,s)=>{s.d(e,{Z:()=>o});var i={};s.r(i),s.d(i,{GAME_OVER:()=>a,GAME_WON:()=>n,SPAWN_POOL_EMPTY:()=>r,UPDATE_HUD:()=>h});const h="GAME::UPDATE_HUD",a="GAME::OVER",n="GAME::WON",r="GAME::SPAWN_POOL_EMPTY";class o extends class{constructor(){this.subscriptions=new Map}subscribe(t,e){this.subscriptions.has(t)||this.subscriptions.set(t,new Set),this.subscriptions.get(t).add(e)}unsubscribe(t,e){this.subscriptions.has(t)?e?this.subscriptions.get(t).delete(e):this.subscriptions.delete(t):console.warn(`[EventEmitter::unsubcribe] event "${t}" does not exist in emitter`)}emit(t,...e){this.subscriptions.has(t)?this.subscriptions.get(t).forEach((t=>t(...e))):console.warn(`[EventEmitter::emit] subscriptions for "${t}" do not exist`)}static once(t,e){return new Promise((s=>{t.addEventListener(e,s,{once:!0})}))}}{constructor(t){super(),this.events=i,this.canvas=t,this.context=t.getContext("2d"),this.objectPool=new Set,this.context.imageSmoothingEnabled=!1,this.gameOver=!1,this.gameWon=!1,this.spawnPoints={topLeft:[-100,-100],topMiddle:[this.canvas.width/2,-100],topRight:[this.canvas.width+100,-100],centerLeft:[-100,this.canvas.height/2],centerMiddle:[this.canvas.width/2,this.canvas.height/2],centerRight:[this.canvas.width+100,this.canvas.height/2],bottomLeft:[-100,this.canvas.height+100],bottomMiddle:[this.canvas.width/2,this.canvas.height+100],bottomRight:[this.canvas.width+100,this.canvas.height+100]},this.spawnPool=new Set,this.spawnPoolIterator=this.spawnPool.values(),this.subscribe(this.events.GAME_OVER,this.onGameOver.bind(this)),this.subscribe(this.events.GAME_WON,this.onGameWon.bind(this)),this.onInit()}addSpawnWave(t,e){this.spawnPool.add([t,e])}nextSpawnWave(){const{value:t,done:e}=this.spawnPoolIterator.next();if(e)return void this.emit(this.events.SPAWN_POOL_EMPTY);const[s,i]=t;i.forEach((t=>{const e=new s(this,...t);this.spawn(e)}))}spawn(t){this.objectPool.add(t)}pop(t){this.objectPool.delete(t)}onGameWon(){this.gameWon=!0}onGameOver(){this.gameOver=!0}onInit(){}onStart(){}findGameObject(t){if("function"!=typeof t)return;let e,s=this.objectPool.values();for(;;){const{done:i,value:h}=s.next();if(i)break;if(t(h)){e=h;break}}return e}start(){this.onStart(),this.emit(this.events.UPDATE_HUD),this.update()}update(){this.context.clearRect(0,0,this.canvas.width,this.canvas.height),this.objectPool.forEach((t=>{this.objectPool.forEach((e=>{if(e===t)return;const s=Math.abs(e.center.x-t.center.x),i=Math.abs(e.center.y-t.center.y);s<e.width&&i<e.height&&(e.onCollision(t),t.onCollision(e))})),t.onUpdate(),t.draw()})),window.requestAnimationFrame(this.update.bind(this))}}},397:(t,e,s)=>{s.d(e,{Z:()=>h});var i=s(555);class h{constructor(t,e,s,i,h){this.game=t,this.size=e,this.x=s,this.y=i,this.image=h}get width(){return this.image.width*this.size}get height(){return this.image.height*this.size}get drawHeight(){return this.image.height*this.size/2*-1}get drawWidth(){return this.image.width*this.size/2*-1}get center(){return{x:this.x-this.image.width*this.size/2,y:this.y-this.image.height*this.size/2}}getDistanceFrom(t){const e=t.center.x-this.center.x,s=t.center.y-this.center.y;return Math.hypot(s,e)}spawn(){this.game.spawn(this)}destroy(){this.game.pop(this)}follow(t){let e=this.speed;e||(e=5);const s=t.center.x-this.center.x,i=t.center.y-this.center.y,h=Math.hypot(i,s),a=Math.abs(s)+Math.abs(i)+h,n=this.center.x>t.center.x?"left":"right",r=this.center.y>t.center.y?"up":"down",o=Math.abs(s/a),c=Math.abs(i/a);this.x="left"===n?this.x-e*o:this.x+e*o,this.y="up"===r?this.y-e*c:this.y+e*c}lookAt(t){const e=(0,i.Ht)(90),s=Math.atan2(this.y-t.center.y,this.x-t.center.x);this.rotate=e+s}onUpdate(){}onCollision(t){}draw(){const t=this.game.context;t.save(),t.translate(this.center.x,this.center.y),this.rotate&&t.rotate(this.rotate),t.drawImage(this.image,this.drawHeight,this.drawWidth,this.image.width*this.size,this.image.height*this.size),t.restore()}}},353:(t,e,s)=>{s.d(e,{Z:()=>i});const i=s.p+"assets/enemy-laser.svg"},341:(t,e,s)=>{s.d(e,{Z:()=>i});const i=s.p+"assets/enemy.svg"},831:(t,e,s)=>{s.d(e,{Z:()=>i});const i=s.p+"assets/explosion.svg"},905:(t,e,s)=>{s.d(e,{Z:()=>i});const i=s.p+"assets/laser.svg"},508:(t,e,s)=>{s.d(e,{Z:()=>i});const i=s.p+"assets/player.svg"},379:(t,e,s)=>{s.d(e,{Z:()=>i});const i=s.p+"assets/star-duotone.svg"},279:(t,e,s)=>{s.a(t,(async t=>{s.d(e,{Z:()=>g});var i=s(397),h=s(497),a=s(597),n=s(863),r=s(555),o=s(341),c=s(353),d=t([n,h,a]);[n,h,a]=d.then?await d:d;const p=await(0,r.Fk)(o.Z),l=await(0,r.Fk)(c.Z);class g extends i.Z{constructor(t,e,s,i,h,a=2e3){super(t,e,s,i,p),this.speed=h,this.lastFiredTime=Date.now(),this.rateOfFire=a}calculateDirection(){if(!this.game.player)return void(this.speed=0);const t=this.playerX-this.center.x,e=this.playerY-this.center.y,s=Math.hypot(e,t),i=Math.abs(t)+Math.abs(e)+s;this.xDirection=this.center.x>this.playerX?"left":"right",this.yDirection=this.center.y>this.playerY?"up":"down",this.xEmphasis=Math.abs(t/i),this.yEmphasis=Math.abs(e/i),this.distanceFromPlayer=s}shootPlayer(){new h.Z(this.game,.05,this.center.x,this.center.y,this.game.player.center.x,this.game.player.center.y,15,400,this,l).spawn()}targetPlayer(){this.game.player?(this.playerX=this.game.player.center.x,this.playerY=this.game.player.center.y,this.calculateDirection(),Date.now()-this.lastFiredTime>this.rateOfFire&&(this.lastFiredTime=Date.now(),this.shootPlayer()),this.x="left"===this.xDirection?this.x-this.speed*this.xEmphasis:this.x+this.speed*this.xEmphasis,this.y="up"===this.yDirection?this.y-this.speed*this.yEmphasis:this.y+this.speed*this.yEmphasis):this.speed=0}onUpdate(){this.targetPlayer()}onDeath(){new a.Z(this.game,this.size,this.x,this.y).spawn(),this.destroy(),this.game.addScore(100),this.game.currentEnemyWaveDefeated&&this.game.nextSpawnWave()}onCollision(t){(t instanceof h.Z&&t.origin!==this||t instanceof n.Z||t instanceof g)&&this.onDeath()}draw(){const t=this.game.context,e=(0,r.Ht)(90),s=Math.atan2(this.y-this.playerY,this.x-this.playerX);t.save(),t.translate(this.center.x,this.center.y),t.rotate(s+e),t.drawImage(this.image,this.drawHeight,this.drawWidth,this.image.width*this.size,this.image.height*this.size),t.restore()}}t()}),1)},597:(t,e,s)=>{s.a(t,(async t=>{s.d(e,{Z:()=>r});var i=s(397),h=s(555),a=s(831);const n=await(0,h.Fk)(a.Z);class r extends i.Z{constructor(t,e,s,i){super(t,e,s,i,n),this.scale=0,this.alpha=1}onUpdate(){switch(!0){case this.scale<2:this.scale=this.scale+.05;break;case this.scale>2&&this.alpha>0:const t=this.alpha-.1;this.alpha=t>0?t:0;break;default:this.destroy()}}drawExplosion(t=0,e=0,s=0){const i=this.game.context;i.save(),i.translate(this.center.x+t,this.center.y+e),i.scale(this.scale-s,this.scale-s),i.globalAlpha=this.alpha,i.drawImage(this.image,this.drawHeight,this.drawWidth,this.image.width*this.size,this.image.height*this.size),i.restore()}draw(){this.scale>.5&&this.drawExplosion(5,10,.5),this.scale>.3&&this.drawExplosion(-10,-10,.3),this.drawExplosion()}}t()}),1)},863:(t,e,s)=>{s.a(t,(async t=>{s.d(e,{Z:()=>p});var i=s(397),h=s(497),a=s(279),n=s(597),r=s(555),o=s(508),c=t([h,n,a]);[h,n,a]=c.then?await c:c;const d=await(0,r.Fk)(o.Z);class p extends i.Z{constructor(t,e,s,i,h){super(t,e,s,i,d),this.movementDelayRange=h}onCollision(t){(t instanceof a.Z||t instanceof h.Z&&t.origin!==this)&&(this.game.emit(this.game.events.GAME_OVER),new n.Z(this.game,this.size,this.x,this.y).spawn(),this.destroy(),delete this.game.player)}shoot(){new h.Z(this.game,.05,this.center.x,this.center.y,this.cursorX,this.cursorY,60,400,this).spawn()}move(t,e){const s=e-this.center.y,i=t-this.center.x,h=Math.hypot(i,s),a=Math.abs(s)+Math.abs(i)+h;if(this.cursorX=t,this.cursorY=e,h>this.movementDelayRange){const n=h-this.movementDelayRange,r=Math.abs(i/a),o=Math.abs(s/a),c=this.center.x>t?"left":"right",d=this.center.y>e?"up":"down";this.x="left"===c?this.x-n*r:this.x+n*r,this.y="up"===d?this.y-n*o:this.y+n*o}}draw(){const t=this.game.context;t.save(),t.translate(this.center.x,this.center.y);const e=(0,r.Ht)(90),s=Math.atan2(this.center.y-this.cursorY,this.center.x-this.cursorX);t.rotate(s-e),t.drawImage(this.image,this.drawHeight,this.drawWidth,this.image.height*this.size,this.image.width*this.size),t.restore()}}t()}),1)},497:(t,e,s)=>{s.a(t,(async t=>{s.d(e,{Z:()=>p});var i=s(397),h=s(279),a=s(597),n=s(863),r=s(555),o=s(905),c=t([a,n,h]);[a,n,h]=c.then?await c:c;const d=await(0,r.Fk)(o.Z);class p extends i.Z{constructor(t,e,s,i,h,a,n,r,o,c){super(t,e,s,i,d),this.xDestination=h,this.yDestination=a,this.speed=n,this.xOrigin=s,this.yOrigin=i,this.xDirection=this.xOrigin>this.xDestination?"left":"right",this.yDirection=this.yOrigin>this.yDestination?"up":"down";const p=this.yDestination-this.yOrigin,l=this.xDestination-this.xOrigin,g=Math.hypot(l,p),m=Math.abs(p)+Math.abs(l)+g;this.xEmphasis=Math.abs(l/m),this.yEmphasis=Math.abs(p/m),this.range=r,this.origin=o,c&&(this.image=c)}get distanceFromOriginPoint(){const t=this.xOrigin-this.center.x,e=this.yOrigin-this.center.y;return Math.hypot(t,e)}onCollision(t){((t instanceof h.Z||t instanceof n.Z)&&t!==this.origin||t instanceof p&&t!==this)&&(new a.Z(this.game,this.size/2,this.x,this.y).spawn(),this.destroy())}onUpdate(){this.x="left"===this.xDirection?this.x-1*this.speed*this.xEmphasis:this.x+1*this.speed*this.xEmphasis,this.y="up"===this.yDirection?this.y-1*this.speed*this.yEmphasis:this.y+1*this.speed*this.yEmphasis,this.distanceFromOriginPoint>this.range&&this.game.pop(this)}draw(){const t=this.game.context;t.save(),t.translate(this.x,this.y),t.drawImage(this.image,this.drawHeight,this.drawWidth,this.image.width*this.size,this.image.height*this.size),t.restore()}}t()}),1)},55:(t,e,s)=>{s.a(t,(async t=>{var e=s(555),i=s(379);await(0,e.Fk)(i.Z),t()}),1)},417:(t,e,s)=>{s.a(t,(async t=>{s.d(e,{Z:()=>o});var i=s(518),h=s(863),a=s(279),n=s(55),r=t([a,h,n]);[a,h,n]=r.then?await r:r;class o extends i.Z{get currentEnemyWaveDefeated(){return!this.findGameObject((t=>t instanceof a.Z))}addScore(t){this.score=this.score+t,this.emit(this.events.UPDATE_HUD)}onInit(){this.score=0,this.player=new h.Z(this,1/8,...this.spawnPoints.centerMiddle,96),this.addSpawnWave(a.Z,[[.1,...this.spawnPoints.bottomLeft,8],[.1,...this.spawnPoints.bottomMiddle,8]]),this.addSpawnWave(a.Z,[[.1,...this.spawnPoints.centerRight,8],[.1,...this.spawnPoints.bottomRight,8]]),this.subscribe(this.events.SPAWN_POOL_EMPTY,(()=>{this.emit(this.events.GAME_WON)}))}onStart(){this.spawn(this.player),this.nextSpawnWave()}}}))},225:(t,e,s)=>{s.a(t,(async t=>{var e=s(417),i=s(555),h=t([e]);e=(h.then?await h:h)[0];const{matches:a}=window.matchMedia("(any-hover: hover)"),n=!a,r=document.getElementById("gamemenu"),o=document.getElementById("menutext"),c=document.getElementById("start"),d=document.getElementById("score"),p=document.getElementById("gamecanvas");(0,i.gN)(p),window.onresize=i.gN.bind(window,p),c.onclick=()=>{c.blur(),setTimeout((()=>{r.style.display="none",function(){const t=new e.Z(p),{events:{UPDATE_HUD:s,GAME_OVER:i,GAME_WON:h}}=t;t.subscribe(s,(()=>{d.innerText=t.score})),t.subscribe(i,(()=>{o.innerText="GAME OVER",c.innerText="RESTART",r.style.display="block"})),t.subscribe(h,(()=>{o.innerText="YOU WIN",c.innerText="RESTART",r.style.display="block"})),p.onmousemove=e=>{t.player&&t.player.move(e.clientX,e.clientY)},window.onkeydown=e=>{"Space"===e.code&&t.player&&t.player.shoot()},n&&(p.ontouchmove=e=>{e.preventDefault();const{touches:[s]}=e;t.player&&t.player.move(s.clientX,s.clientY)},p.ontouchstart=e=>{e.preventDefault();const{touches:[s,i]}=e;i&&t.player&&t.player.shoot()}),t.start()}()}),200)}}))},555:(t,e,s)=>{function i(t){t.width=window.innerWidth,t.height=window.innerHeight}function h(t){return t*(Math.PI/180)}async function a(t){const e=await fetch(t),s=await e.blob(),[i]=(await s.text()).match('viewBox=".*?"'),h=new Image;if(i){const[t,e,s,a]=i.split(/viewBox|="|"| /).filter((t=>!!t));h.width=s,h.height=a}return h.src=URL.createObjectURL(s),h}s.d(e,{gN:()=>i,Ht:()=>h,Fk:()=>a})}},n={};function r(t){var e=n[t];if(void 0!==e)return e.exports;var s=n[t]={exports:{}};return a[t](s,s.exports,r),s.exports}t="function"==typeof Symbol?Symbol("webpack then"):"__webpack_then__",e="function"==typeof Symbol?Symbol("webpack exports"):"__webpack_exports__",s=t=>{t&&(t.forEach((t=>t.r--)),t.forEach((t=>t.r--?t.r++:t())))},i=t=>!--t.r&&t(),h=(t,e)=>t?t.push(e):i(e),r.a=(a,n,r)=>{var o,c,d,p=r&&[],l=a.exports,g=!0,m=!1,y=(e,s,i)=>{m||(m=!0,s.r+=e.length,e.map(((e,h)=>e[t](s,i))),m=!1)},w=new Promise(((t,e)=>{d=e,c=()=>(t(l),s(p),p=0)}));w[e]=l,w[t]=(t,e)=>{if(g)return i(t);o&&y(o,t,e),h(p,t),w.catch(e)},a.exports=w,n((a=>{if(!a)return c();var n,r;o=(a=>a.map((a=>{if(null!==a&&"object"==typeof a){if(a[t])return a;if(a.then){var n=[];a.then((t=>{r[e]=t,s(n),n=0}));var r={};return r[t]=(t,e)=>(h(n,t),a.catch(e)),r}}var o={};return o[t]=t=>i(t),o[e]=a,o})))(a);var d=new Promise(((t,s)=>{(n=()=>t(r=o.map((t=>t[e])))).r=0,y(o,n,s)}));return n.r?d:r})).then(c,d),g=!1},r.d=(t,e)=>{for(var s in e)r.o(e,s)&&!r.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:e[s]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),r.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},(()=>{var t;r.g.importScripts&&(t=r.g.location+"");var e=r.g.document;if(!t&&e&&(e.currentScript&&(t=e.currentScript.src),!t)){var s=e.getElementsByTagName("script");s.length&&(t=s[s.length-1].src)}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),r.p=t})(),r(225)})();