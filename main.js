(()=>{"use strict";var t,e,s,i,h,a={211:(t,e,s)=>{s.a(t,(async t=>{s.d(e,{Z:()=>m});var i=s(726),h=s(39),a=s(678),n=s(716),r=s(324),o=s(555),c=s(341),p=s(353),d=t([r,a,n,i,h]);[r,a,n,i,h]=d.then?await d:d;const l=await(0,o.Fk)(c.Z),g=await(0,o.Fk)(p.Z);class m extends i.Z{constructor(t,e,s,i,h,a=2e3){super(t,e,s,i,l),this.speed=h,this.lastFiredTime=Date.now(),this.rateOfFire=a}calculateDirection(){if(!this.game.player)return void(this.speed=0);const t=this.playerX-this.center.x,e=this.playerY-this.center.y,s=Math.hypot(e,t),i=Math.abs(t)+Math.abs(e)+s;this.xDirection=this.center.x>this.playerX?"left":"right",this.yDirection=this.center.y>this.playerY?"up":"down",this.xEmphasis=Math.abs(t/i),this.yEmphasis=Math.abs(e/i),this.distanceFromPlayer=s}shootPlayer(){new a.Z(this.game,.05,this.center.x,this.center.y,this.game.player.center.x,this.game.player.center.y,15,400,this,g)}targetPlayer(){this.game.player?(this.playerX=this.game.player.center.x,this.playerY=this.game.player.center.y,this.calculateDirection(),Date.now()-this.lastFiredTime>this.rateOfFire&&(this.lastFiredTime=Date.now(),this.shootPlayer()),this.x="left"===this.xDirection?this.x-this.speed*this.xEmphasis:this.x+this.speed*this.xEmphasis,this.y="up"===this.yDirection?this.y-this.speed*this.yEmphasis:this.y+this.speed*this.yEmphasis):this.speed=0}onUpdate(){this.targetPlayer()}onDeath(){new n.Z(this.game,this.size,this.x,this.y),this.game.pop(this),this.game.score=this.game.score+100,this.game.emit(this.game.events.UPDATE_HUD),this.game.currentEnemyWaveDefeated&&this.game.spawnEnemyWave()}onCollision(t){(t instanceof a.Z&&t.origin!==this||t instanceof r.Z||t instanceof m)&&this.onDeath()}draw(){const t=this.game.context,e=(0,o.Ht)(90),s=Math.atan2(this.y-this.playerY,this.x-this.playerX);t.save(),t.translate(this.center.x,this.center.y),t.rotate(s+e),t.drawImage(this.image,this.drawHeight,this.drawWidth,this.image.width*this.size,this.image.height*this.size),t.restore()}}t()}),1)},299:(t,e,s)=>{s.d(e,{Z:()=>i});class i{constructor(){this.subscriptions=new Map}subscribe(t,e){this.subscriptions.has(t)||this.subscriptions.set(t,new Set),this.subscriptions.get(t).add(e)}unsubscribe(t,e){this.subscriptions.has(t)?e?this.subscriptions.get(t).delete(e):this.subscriptions.delete(t):console.warn(`[EventEmitter::unsubcribe] event "${t}" does not exist in emitter`)}emit(t,...e){this.subscriptions.has(t)?this.subscriptions.get(t).forEach((t=>t(...e))):console.warn(`[EventEmitter::emit] subscriptions for "${t}" do not exist`)}static once(t,e){return new Promise((s=>{t[e]=s}))}}},285:(t,e,s)=>{s.r(e),s.d(e,{UPDATE_HUD:()=>i,GAME_OVER:()=>h,GAME_WON:()=>a});const i="GAME::UPDATE_HUD",h="GAME::OVER",a="GAME::WON"},716:(t,e,s)=>{s.a(t,(async t=>{s.d(e,{Z:()=>o});var i=s(726),h=s(555),a=s(831),n=t([i]);i=(n.then?await n:n)[0];const r=await(0,h.Fk)(a.Z);class o extends i.Z{constructor(t,e,s,i){super(t,e,s,i,r),this.scale=0,this.alpha=1}onUpdate(){switch(!0){case this.scale<2:this.scale=this.scale+.05;break;case this.scale>2&&this.alpha>0:const t=this.alpha-.1;this.alpha=t>0?t:0;break;default:this.game.pop(this)}}drawExplosion(t=0,e=0,s=0){const i=this.game.context;i.save(),i.translate(this.center.x+t,this.center.y+e),i.scale(this.scale-s,this.scale-s),i.globalAlpha=this.alpha,i.drawImage(this.image,this.drawHeight,this.drawWidth,this.image.width*this.size,this.image.height*this.size),i.restore()}draw(){this.scale>.5&&this.drawExplosion(5,10,.5),this.scale>.3&&this.drawExplosion(-10,-10,.3),this.drawExplosion()}}t()}),1)},39:(t,e,s)=>{s.a(t,(async t=>{s.d(e,{Z:()=>p});var i=s(324),h=s(726),a=s(211),n=s(576),r=s(285),o=s(299),c=t([i,a,n,h]);[i,a,n,h]=c.then?await c:c;class p extends o.Z{constructor(t){super(),this.events=r,this.canvas=t,this.context=t.getContext("2d"),this.objectPool=new Set,this.context.imageSmoothingEnabled=!1,this.gameOver=!1,this.gameWon=!1,this.score=0,this.subscriptions=new Map,this.spawnPoints={topLeft:[-100,-100],topMiddle:[this.canvas.width/2,-100],topRight:[this.canvas.width+100,-100],centerLeft:[-100,this.canvas.height/2],centerMiddle:[this.canvas.width/2,this.canvas.height/2],centerRight:[this.canvas.width+100,this.canvas.height/2],bottomLeft:[-100,this.canvas.height+100],bottomMiddle:[this.canvas.width/2,this.canvas.height+100],bottomRight:[this.canvas.width+100,this.canvas.height+100]},this.enemyWaves=(new Set).add([this.spawnPoints.centerRight,this.spawnPoints.topLeft]).add([this.spawnPoints.bottomMiddle,this.spawnPoints.bottomLeft]).add([this.spawnPoints.centerLeft,this.spawnPoints.topRight,this.spawnPoints.bottomRight]).add([this.spawnPoints.bottomLeft,this.spawnPoints.topRight,this.spawnPoints.bottomRight,this.spawnPoints.topMiddle]).values(),this.subscribe(this.events.GAME_OVER,this.onGameOver.bind(this)),this.subscribe(this.events.GAME_WON,this.onGameWon.bind(this))}spawn(t){this.objectPool.add(t)}get currentEnemyWaveDefeated(){let t=!0;return this.objectPool.forEach((e=>{e instanceof a.Z&&(t=!1)})),t}spawnEnemyWave(){const{value:t,done:e}=this.enemyWaves.next();e?this.emit(this.events.GAME_WON):t.forEach((t=>{new a.Z(this,.1,...t,7)}))}pop(t){this.objectPool.delete(t)}onGameWon(){this.gameWon=!0}onGameOver(){this.gameOver=!0}start(t,e){this.player=new i.Z(this,1/8,...this.spawnPoints.centerMiddle,96),this.player.move(t,e),this.score=0,this.emit(this.events.UPDATE_HUD),this.spawnEnemyWave(),this.update()}update(){this.context.clearRect(0,0,this.canvas.width,this.canvas.height),this.objectPool.forEach((t=>{this.objectPool.forEach((e=>{if(e===t)return;const s=Math.abs(e.center.x-t.center.x),i=Math.abs(e.center.y-t.center.y);s<e.width&&i<e.height&&(e.onCollision(t),t.onCollision(e))})),t.onUpdate(),t.draw()})),window.requestAnimationFrame(this.update.bind(this))}}}))},726:(t,e,s)=>{s.a(t,(async t=>{s.d(e,{Z:()=>a});var i=s(39),h=t([i]);i=(h.then?await h:h)[0];class a{constructor(t,e,s,i,h){this.game=t,this.size=e,this.x=s,this.y=i,this.image=h,this.game.spawn(this)}get width(){return this.image.width*this.size}get height(){return this.image.height*this.size}get drawHeight(){return this.image.height*this.size/2*-1}get drawWidth(){return this.image.width*this.size/2*-1}get center(){return{x:this.x-this.image.width*this.size/2,y:this.y-this.image.height*this.size/2}}onUpdate(){}onCollision(t){}draw(){const t=this.game.context;t.save(),t.translate(this.center.x,this.center.y),t.drawImage(this.image,this.drawHeight,this.drawWidth,this.image.width*this.size,this.image.height*this.size),t.restore()}}}))},324:(t,e,s)=>{s.a(t,(async t=>{s.d(e,{Z:()=>l});var i=s(726),h=s(39),a=s(678),n=s(211),r=s(716),o=s(555),c=s(508),p=t([a,r,n,i,h]);[a,r,n,i,h]=p.then?await p:p;const d=await(0,o.Fk)(c.Z);class l extends i.Z{constructor(t,e,s,i,h){super(t,e,s,i,d),this.movementDelayRange=h}onCollision(t){(t instanceof n.Z||t instanceof a.Z&&t.origin!==this)&&(this.game.emit(this.game.events.GAME_OVER),new r.Z(this.game,this.size,this.x,this.y),this.game.pop(this),delete this.game.player)}shoot(){new a.Z(this.game,.05,this.center.x,this.center.y,this.cursorX,this.cursorY,60,400,this)}move(t,e){const s=e-this.center.y,i=t-this.center.x,h=Math.hypot(i,s),a=Math.abs(s)+Math.abs(i)+h;if(this.cursorX=t,this.cursorY=e,h>this.movementDelayRange){const n=h-this.movementDelayRange,r=Math.abs(i/a),o=Math.abs(s/a),c=this.center.x>t?"left":"right",p=this.center.y>e?"up":"down";this.x="left"===c?this.x-n*r:this.x+n*r,this.y="up"===p?this.y-n*o:this.y+n*o}}draw(){const t=this.game.context;t.save(),t.translate(this.center.x,this.center.y);const e=(0,o.Ht)(90),s=Math.atan2(this.center.y-this.cursorY,this.center.x-this.cursorX);t.rotate(s-e),t.drawImage(this.image,this.drawHeight,this.drawWidth,this.image.height*this.size,this.image.width*this.size),t.restore()}}t()}),1)},678:(t,e,s)=>{s.a(t,(async t=>{s.d(e,{Z:()=>l});var i=s(726),h=s(39),a=s(211),n=s(716),r=s(324),o=s(555),c=s(905),p=t([n,r,a,i,h]);[n,r,a,i,h]=p.then?await p:p;const d=await(0,o.Fk)(c.Z);class l extends i.Z{constructor(t,e,s,i,h,a,n,r,o,c){super(t,e,s,i,d),this.xDestination=h,this.yDestination=a,this.speed=n,this.xOrigin=s,this.yOrigin=i,this.xDirection=this.xOrigin>this.xDestination?"left":"right",this.yDirection=this.yOrigin>this.yDestination?"up":"down";const p=this.yDestination-this.yOrigin,l=this.xDestination-this.xOrigin,g=Math.hypot(l,p),m=Math.abs(p)+Math.abs(l)+g;this.xEmphasis=Math.abs(l/m),this.yEmphasis=Math.abs(p/m),this.range=r,this.origin=o,c&&(this.image=c)}get distanceFromOriginPoint(){const t=this.xOrigin-this.center.x,e=this.yOrigin-this.center.y;return Math.hypot(t,e)}onCollision(t){((t instanceof a.Z||t instanceof r.Z)&&t!==this.origin||t instanceof l&&t!==this)&&(new n.Z(this.game,this.size/2,this.x,this.y),this.game.pop(this))}onUpdate(){this.x="left"===this.xDirection?this.x-1*this.speed*this.xEmphasis:this.x+1*this.speed*this.xEmphasis,this.y="up"===this.yDirection?this.y-1*this.speed*this.yEmphasis:this.y+1*this.speed*this.yEmphasis,this.distanceFromOriginPoint>this.range&&this.game.pop(this)}draw(){const t=this.game.context;t.save(),t.translate(this.x,this.y),t.drawImage(this.image,this.drawHeight,this.drawWidth,this.image.width*this.size,this.image.height*this.size),t.restore()}}t()}),1)},576:(t,e,s)=>{s.a(t,(async t=>{var e=s(726),i=s(555),h=s(379),a=t([e]);e=(a.then?await a:a)[0],await(0,i.Fk)(h.Z),t()}),1)},353:(t,e,s)=>{s.d(e,{Z:()=>i});const i=s.p+"assets/enemy-laser.svg"},341:(t,e,s)=>{s.d(e,{Z:()=>i});const i=s.p+"assets/enemy.svg"},831:(t,e,s)=>{s.d(e,{Z:()=>i});const i=s.p+"assets/explosion.svg"},905:(t,e,s)=>{s.d(e,{Z:()=>i});const i=s.p+"assets/laser.svg"},508:(t,e,s)=>{s.d(e,{Z:()=>i});const i=s.p+"assets/player.svg"},379:(t,e,s)=>{s.d(e,{Z:()=>i});const i=s.p+"assets/star-duotone.svg"},225:(t,e,s)=>{s.a(t,(async t=>{var e=s(39),i=s(555),h=t([e]);e=(h.then?await h:h)[0];const{matches:a}=window.matchMedia("(any-hover: hover)"),n=!a,r=document.getElementById("gamemenu"),o=document.getElementById("menutext"),c=document.getElementById("start"),p=document.getElementById("score"),d=document.getElementById("gamecanvas");(0,i.gN)(d),window.onresize=i.gN.bind(window,d),c.onclick=()=>{c.blur(),setTimeout((()=>{r.style.display="none",function(){const t=new e.Z(d),{events:{UPDATE_HUD:s,GAME_OVER:i,GAME_WON:h}}=t;t.subscribe(s,(()=>{p.innerText=t.score})),t.subscribe(i,(()=>{o.innerText="GAME OVER",c.innerText="RESTART",r.style.display="block"})),t.subscribe(h,(()=>{o.innerText="YOU WIN",c.innerText="RESTART",r.style.display="block"})),d.onmousemove=e=>{t.player&&t.player.move(e.clientX,e.clientY)},window.onkeydown=e=>{"Space"===e.code&&t.player&&t.player.shoot()},n&&(d.ontouchmove=e=>{e.preventDefault();const{touches:[s]}=e;t.player&&t.player.move(s.clientX,s.clientY)},d.ontouchstart=e=>{e.preventDefault();const{touches:[s,i]}=e;i&&t.player&&t.player.shoot()}),t.start()}()}),200)}}))},555:(t,e,s)=>{function i(t){t.width=window.innerWidth,t.height=window.innerHeight}function h(t){return t*(Math.PI/180)}async function a(t){const e=await fetch(t),s=await e.blob(),[i]=(await s.text()).match('viewBox=".*?"'),h=new Image;if(i){const[t,e,s,a]=i.split(/viewBox|="|"| /).filter((t=>!!t));h.width=s,h.height=a}return h.src=URL.createObjectURL(s),h}s.d(e,{gN:()=>i,Ht:()=>h,Fk:()=>a})}},n={};function r(t){var e=n[t];if(void 0!==e)return e.exports;var s=n[t]={exports:{}};return a[t](s,s.exports,r),s.exports}t="function"==typeof Symbol?Symbol("webpack then"):"__webpack_then__",e="function"==typeof Symbol?Symbol("webpack exports"):"__webpack_exports__",s=t=>{t&&(t.forEach((t=>t.r--)),t.forEach((t=>t.r--?t.r++:t())))},i=t=>!--t.r&&t(),h=(t,e)=>t?t.push(e):i(e),r.a=(a,n,r)=>{var o,c,p,d=r&&[],l=a.exports,g=!0,m=!1,y=(e,s,i)=>{m||(m=!0,s.r+=e.length,e.map(((e,h)=>e[t](s,i))),m=!1)},w=new Promise(((t,e)=>{p=e,c=()=>(t(l),s(d),d=0)}));w[e]=l,w[t]=(t,e)=>{if(g)return i(t);o&&y(o,t,e),h(d,t),w.catch(e)},a.exports=w,n((a=>{if(!a)return c();var n,r;o=(a=>a.map((a=>{if(null!==a&&"object"==typeof a){if(a[t])return a;if(a.then){var n=[];a.then((t=>{r[e]=t,s(n),n=0}));var r={};return r[t]=(t,e)=>(h(n,t),a.catch(e)),r}}var o={};return o[t]=t=>i(t),o[e]=a,o})))(a);var p=new Promise(((t,s)=>{(n=()=>t(r=o.map((t=>t[e])))).r=0,y(o,n,s)}));return n.r?p:r})).then(c,p),g=!1},r.d=(t,e)=>{for(var s in e)r.o(e,s)&&!r.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:e[s]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),r.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},(()=>{var t;r.g.importScripts&&(t=r.g.location+"");var e=r.g.document;if(!t&&e&&(e.currentScript&&(t=e.currentScript.src),!t)){var s=e.getElementsByTagName("script");s.length&&(t=s[s.length-1].src)}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),r.p=t})(),r(225)})();